<mat-card class="calculator-card">
  <mat-card-header>
<mat-card-title class="title">
VAT Invoice Calculator (KDV Fatura Hesaplayıcı)
</mat-card-title>

  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="form">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Amount (₺) (Miktar)</mat-label>
        <input matInput type="number" formControlName="inclusive" placeholder="0.00">
        <mat-error *ngIf="form.get('inclusive')?.hasError('required')">
          Bu alan zorunludur
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Levy (%) (Vergi/Pay)</mat-label>
        <input matInput type="number" formControlName="levyPercent">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Get Fund Levy (%) (Fon Kesintisi)</mat-label>
        <input matInput type="number" formControlName="getFundPercent">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Covid Levy (%) (Covid Vergisi)</mat-label>
        <input matInput type="number" formControlName="covidPercent">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>NHIL (%) (Ulusal Sağlık Sigortası Vergisi)</mat-label>
        <input matInput type="number" formControlName="nhilPercent">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>KDV (%)</mat-label>
        <input matInput type="number" formControlName="vatPercent">
      </mat-form-field>

      <button mat-raised-button color="primary" (click)="calculate()" [disabled]="!form.valid">
        Hesapla
      </button>
    </form>

    <div *ngIf="result" class="result-section">
      <h3>Sonuçlar</h3>
      <table>
        <tr>
          <td><strong>Invoice Amount (Fatura Tutarı):</strong></td>
          <td>{{ result.invoiceAmount | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>Levy ({{ result.rates.levyPercent }}%) (Vergi/Pay):</strong></td>
          <td>{{ result.levy | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>Get Fund Levy ({{ result.rates.getFundPercent }}%) (Fon Kesintisi):</strong></td>
          <td>{{ result.getFund | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>Covid Levy ({{ result.rates.covidPercent }}%) (Covid Vergisi):</strong></td>
          <td>{{ result.covid | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>NHIL ({{ result.rates.nhilPercent }}%) (Ulusal Sağlık Sigortası Vergisi):</strong></td>
          <td>{{ result.nhil | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>Value before VAT (KDV Öncesi Değer):</strong></td>
          <td>{{ result.net | number:'1.2-2' }} ₺</td>
        </tr>
        <tr>
          <td><strong>VAT ({{ result.rates.vatPercent }}%) (KDV):</strong></td>
          <td>{{ result.vat | number:'1.2-2' }} ₺</td>
        </tr>
        <tr class="total-row">
          <td><strong>All Taxes Inclusive (Vergiler Dahil Toplam):</strong></td>
          <td><strong>{{ result.total | number:'1.2-2' }} ₺</strong></td>
        </tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>
